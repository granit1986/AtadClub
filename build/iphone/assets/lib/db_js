var UpdateEvent=function(t){var l=Ti.Database.install("/ticket1.sqlite","DB_1"),e=l.execute("SELECT * FROM organaizer WHERE Id="+t.Token);e&&e.isValidRows()&&l.execute("UPDATE events SET Name = '"+t.name+"', Description = '"+t.description+"', StartDate = '"+t.startDate+"', EndDate = '"+t.endDate+"' WHERE Id="+t.id),e.close(),l.close()},GetEvents=function(t,l){for(var e=Ti.Database.install("/ticket1.sqlite","DB_1"),o=e.execute("SELECT * FROM organaizer WHERE OrganaizerUID="+t+" and Id>"+l);o.isValidRows();)o.next();o.close(),e.close()},GetApiToken=function(){var t=Ti.Database.install("/ticket1.sqlite","DB_1"),l=t.execute("SELECT * FROM organaizer");if(l.isValidRow()&&l.getRowCount()>0){var e=l.fieldByName("UID");return l.close(),t.close(),e}return t.close(),l.close(),0},SetToken=function(t){var l=Ti.Database.install("/ticket1.sqlite","DB_1");return t?(l.execute("DELETE FROM organaizer"),l.execute("INSERT INTO organaizer (Id,UID) VALUES (?,?)",1,t)):l.execute("DELETE FROM organaizer"),l.close(),t},CacheInDb=function(t,l){var e=Ti.Database.install("/ticket1.sqlite","DB_1");switch(t){case"categories":for(var o=0;o<l.length;o++){var i=l[o];e.execute("DELETE FROM categories"),e.execute("INSERT INTO categories (Id, Name, ForDeals, Updated) VALUES (?, ?, ?, ?)",i.id,i.name,i.forDeals?"1":0,new Date(i.updated).getTime())}break;case"subcategories":}e.close()},GetCacheFromDb=function(t){var l=Ti.Database.install("/ticket1.sqlite","DB_1");switch(t){case"categories":for(var e=l.execute("SELECT * FROM categories"),o=[];e.isValidRow();){var i={};i.id=e.fieldByName("Id"),i.name=e.fieldByName("Name"),i.forDeals=e.fieldByName("ForDeals"),o.push(i),e.next()}return o;case"subcategories":}l.close()},GetLastUpdate=function(t){var l=Ti.Database.install("/ticket1.sqlite","DB_1");switch(t){case"categories":var e=l.execute("SELECT Date FROM UpdatesTime Where Id=1");if(e.isValidRow()&&e.getRowCount()>0){var o=e.fieldByName("Date"),i=new Date(o);return e.close(),l.close(),i}return items;case"subcategories":}l.close()};