var GOOGLE_BASE_URL="http://maps.google.com/maps/api/geocode/json?address=",ERROR_MESSAGE="There was an error geocoding. Please try again.",GeoData=function(t,l,e){this.title=t,this.coords={latitude:l,longitude:e}};exports.forwardGeocode=function(t,l){"mobileweb"===Ti.Platform.osname?forwardGeocodeWeb(t,l):forwardGeocodeNative(t,l)};var forwardGeocodeNative=function(t,l){var e=Titanium.Network.createHTTPClient(),o=GOOGLE_BASE_URL+t.replace(" ","+");o+="&sensor="+(1==Titanium.Geolocation.locationServicesEnabled),e.open("GET",o),e.onload=function(){var e=JSON.parse(this.responseText);return"OK"!=e.status?void Alloy.Globals.core.showErrorDialog("Unable to geocode the address"):void l(new GeoData(t,e.results[0].geometry.location.lat,e.results[0].geometry.location.lng))},e.onerror=function(t){Ti.API.error(t.error),Alloy.Globals.core.showErrorDialog(ERROR_MESSAGE)},e.send()},forwardGeocodeWeb=function(t,l){var e=new google.maps.Geocoder;e?e.geocode({address:t},function(e,o){o==google.maps.GeocoderStatus.OK?l(new GeoData(t,e[0].geometry.location.lat(),e[0].geometry.location.lng())):(Ti.API.error(o),Alloy.Globals.core.showErrorDialog(ERROR_MESSAGE))}):Alloy.Globals.core.showErrorDialog("Google Maps Geocoder not supported")};