function __processArg(e,t){var l=null;return e&&(l=e[t]||null,delete e[t]),l}function Controller(){function e(){if(I.address.setHintText(L("enter_address")),U.openIndicator(),C&&(x=Alloy.Collections.adverts.where({id:C})[0].toJSON()),x){address=x.address,lat=x.lat,lng=x.lng,subCategories=JSON.parse(x.subCategories),I.title.value=x.name,I.price.value=x.price,I.description.value=x.description,I.address.value=x.address,I.switch_.value=x.active,I.button.title=L("update_advert_button"),P.selectedCategoriesInEdit={};for(var e=0;e<subCategories.length;++e){var t=subCategories[e];P.subCategories.select({categoryId:t.CategoryId,id:t.Id},P.selectedCategoriesInEdit)}if(f(),x.images){x.images=JSON.parse(x.images);for(var e=0;e<x.images.length;e++)w("http://"+Ti.App.serverDomain+"/api/"+Titanium.App.ApiVersion+"/image/"+x.images[e]+Alloy.Globals.imageSizes.advert.row(),x.images[e])}}else Alloy.Globals.core.selectedNewAdvertCategories={},I.delete_button.hide();U.closeIndicator()}function t(e){l(e)}function l(e){"description"!==e.source.id&&I.description.blur(),"title"!==e.source.id&&I.title.blur(),"price"!==e.source.id&&I.price.blur(),"address"!==e.source.id&&I.address.blur()}function o(e){l(e)}function i(){var e=Alloy.Globals.geo;e.checkLocation(function(){return e.location.status!=e.errors.NONE?(Alloy.Globals.core.showErrorDialog(L(e.location.status.message)),void U.closeIndicator()):void e.reverseGeocoding(e.location.latitude,e.location.longitude,function(e){U.closeIndicator(),e&&e.error?Alloy.Globals.core.showErrorDialog(L(e.message?e.message:e.error)):e&&e.response&&(e.response.results&&e.response.results[0]&&e.response.results[0].formatted_address?I.address.value=e.response.results[0].formatted_address:e.response.resourceSets&&e.response.resourceSets[0]&&e.response.resourceSets[0].resources&&e.response.resourceSets[0].resources[0]&&e.response.resourceSets[0].resources[0].address&&e.response.resourceSets[0].resources[0]&&e.response.resourceSets[0].resources[0].address.formattedAddress&&(I.address.value=e.response.resourceSets[0].resources[0].address.formattedAddress))})})}function s(){geo.geocoding(I.address.value,function(e){if(e.error)return void Alloy.Globals.core.showErrorDialog(L(e.message));if(e.error==geo.elementStatuses.ZERO_RESULTS||e.error==geo.elementStatuses.NOT_FOUND)return U.closeIndicator(),void Alloy.Globals.core.showErrorDialog(L("address_not_found"));for(var t=[],l=0;l<e.response.results.length;l++){var o=e.response.results[l];t.push({title:o.formatted_address,data:{lat:o.geometry.location.lat,lng:o.geometry.location.lng}})}var i=Alloy.createController("picker/genericPicker",{callback:function(e,t,l){I.address.value=e.title?e.title:e,e.data&&(lat=e.data.lat,lng=e.data.lng),l&&(F=l),t&&I.pickerWrap.removeAllChildren()},rowIndex:F,items:t}).getView();d(),I.pickerWrap.removeAllChildren(),I.pickerWrap.add(i)})}function a(e){e.source.backgroundColor=Alloy.Globals.Styles.buttonBgOnTap}function r(e){e.source.backgroundColor=Alloy.Globals.Styles.buttonBg;var t=e.source.id;switch(t){case"button":U.openIndicator(),c();break;case"delete_button":U.openIndicator(),S();break;case"customLocation":U.openIndicator(),i();break;case"cancel_button":n()}}function n(){I.window.close()}function d(){I.address.blur()}function c(){if(!Alloy.Globals.core.apiToken()){var e=Titanium.UI.createAlertDialog({title:L("signup_or_signin_title"),message:L("signup_or_signin_message"),buttonNames:[L("no"),L("yes")],cancel:0});return U.closeIndicator(),e.addEventListener("click",function(e){e.cancel!==e.index&&!0!==e.cancel&&Alloy.Globals.tabGroup.setActiveTab(Alloy.CFG.tabAccount)}),void e.show()}if(0==subCategories.length)return U.closeIndicator(),void Alloy.Globals.core.showErrorDialog(L("please_select_category"));for(var t=[],l=0;l<subCategories.length;++l){var o=subCategories[l];t.push(o.Id?o.Id:o)}var i={name:I.title.value,price:I.price.value,description:I.description.value,address:I.address.value,lat:parseFloat(lat),lng:parseFloat(lng),subCategories:JSON.stringify(t),active:I.switch_.value};x&&(i.id=x.id),i.lat=geo.location.latitude,i.lng=geo.location.longitude,i=Alloy.createModel("advert",i),i.localValidate(p)?lat&&lng&&I.address.value===address?u(i):geo.geocoding(I.address.value,function(e){return e.error?void Alloy.Globals.core.showErrorDialog(L(e.message)):e.error==geo.elementStatuses.ZERO_RESULTS||e.error==geo.elementStatuses.NOT_FOUND?(U.closeIndicator(),void Alloy.Globals.core.showErrorDialog(L("address_not_found"))):e&&e.response&&e.response.results&&e.response.results.length>0?(i.attributes.lat=parseFloat(e.response.results[0].geometry.location.lat),i.attributes.lng=parseFloat(e.response.results[0].geometry.location.lng),void u(i)):(U.closeIndicator(),void Alloy.Globals.core.showErrorDialog(L("address_not_found")))}):U.closeIndicator()}function u(e){e.save({},{success:function(e,t){for(var l=0;l<I.images.children.length;l++){var o=I.images.children[l].image;if(o&&!o.serverId){if("string"!=typeof o){var i=1,s=400,a=I.images.children[l],r=o.height,n=o.width,d=Ti.UI.createImageView({image:a.image,width:n,height:r});r>n?(i=n/r,d.height=s,d.width=s*i):(i=r/n,d.width=s,d.height=s*i),o=d.toImage()}images.push(o)}}if(images.length>0||imagesToDelete.length>0){var c=Alloy.Globals.upload;E.openBar(),c.start({type:c.types.advert,id:t,blobs:images,"delete":JSON.stringify(imagesToDelete),onerror:function(){U.closeIndicator(),E.closeBar(),Alloy.Globals.core.showErrorDialog(L("error_loading_image"))},onload:function(){E.setBarValue(1),E.closeBar(),y(),U.closeIndicator()},onsendstream:function(e){E.setBarValue(e.progress),Ti.API.info("progress - "+e.progress)}})}else y();I.itemIsLoad.visible=!1},error:function(e,t){if(t&&t.maxAdverts){var l=Titanium.UI.createAlertDialog({title:L("upgrade_membership"),message:L("limit")+" "+t.maxAdverts+" "+L("limit_adverts"),buttonNames:[L("upgrade"),L("OK")]});l.addEventListener("click",function(e){if(!e.index){var t=Alloy.createController("account/upgradeSelect").getView();Alloy.Globals.tabGroup.activeTab.open(t)}}),l.show()}else t&&t.Message&&Alloy.Globals.core.showErrorDialog(t.Message);U.closeIndicator()}})}function y(){if(U.closeIndicator(),x)imagesToDelete=[],Alloy.Globals.core.showErrorDialog(L("avdvert_updated_label")),Ti.App.fireEvent("account:updateAdverts"),k&&k(),I.window.close();else{I.itemIsLoad.visible=!0,address=!1,subCategories=[],images=[],imagesToDelete=[],I.title.value="",I.price.value="",I.description.value="",I.address.value="",I.images.removeAllChildren(),I.switch_.value=!1,I.itemIsLoad.visible=!1;var e=Titanium.UI.createAlertDialog({title:L("avdvert_added_label")});e.addEventListener("click",function(){k&&k(),Ti.App.fireEvent("account:updateAdverts"),I.window.close()}),e.show()}}function p(e){switch(e){case N.NO_TITLE:I.title.focus();break;case N.NO_PRICE:I.price.focus();break;case N.INVALID_PRICE:I.price.focus();break;case N.NO_ADDRESS:I.address.focus()}Alloy.Globals.core.showError(e)}function h(){U.openIndicator();var e=Alloy.createController("subCategories/index",{categoryId:1,categoryName:L("categories"),sectionName:x?"":"newadvert",closeCallback:function(){if(subCategories=[],P.currentSectionCategories()._1)for(var e in P.currentSectionCategories()._1)subCategories.push(P.currentSectionCategories()._1[e]);f()}}).getView();U.closeIndicator(),Alloy.Globals.tabGroup.activeTab.open(e)}function f(){I.selectedCategories.text="",subCategories.forEach(function(e){var t;t=Alloy.Collections.subCategories.get(e.Id?e.Id:e),I.selectedCategories.text+=""==I.selectedCategories.text?t.attributes.name:", "+t.attributes.name})}function g(){Titanium.Media.openPhotoGallery({success:function(e){e.mediaType==Titanium.Media.MEDIA_TYPE_PHOTO&&w(e.media)}})}function b(){O.show()}function w(e,t){U.openIndicator();var l=Ti.UI.createImageView({image:e,width:"56dp",height:"56dp",right:"5dp",bottom:"5dp",serverId:t||!1}),o=I.addPhoto;I.images.remove(I.addPhoto),I.images.add(l),I.images.add(o),U.closeIndicator(),I.howToDeleteImageLbl.visible=!0,M++}function v(){Titanium.Media.showCamera({success:function(e){e.mediaType==Titanium.Media.MEDIA_TYPE_PHOTO&&w(e.media)},cancel:function(){},error:function(){}})}function m(e){"[object TiUIImageView]"===e.source.toString()&&(e.source.serverId&&imagesToDelete.push(e.source.serverId),I.images.remove(e.source),M--,0==M&&(I.howToDeleteImageLbl.visible=!1))}function A(){k&&k(),U.closeIndicator()}function S(){var e=Titanium.UI.createAlertDialog({title:L("delete_advert_title"),message:L("delete_advert_message"),buttonNames:[L("no"),L("yes")],cancel:0});e.addEventListener("click",function(e){U.closeIndicator(),1==e.index&&Alloy.Collections.adverts.where({id:x.id})[0].destroy({success:function(){Ti.App.fireEvent("account:updateAdverts"),I.window.close()},error:function(){}})}),e.show()}require("alloy/controllers/BaseController").apply(this,Array.prototype.slice.call(arguments)),this.__controllerPath="add/advert",arguments[0]&&(__processArg(arguments[0],"__parentSymbol"),__processArg(arguments[0],"$model"),__processArg(arguments[0],"__itemTemplate"));var I=this,T={},G={};I.__views.window=Ti.UI.createWindow({backgroundImage:Alloy.Globals.Styles.backgroundImage,layout:"absolute",id:"window",fullscreen:"true",titleid:"add_new_advert"}),I.__views.window&&I.addTopLevelView(I.__views.window),A?I.__views.window.addEventListener("close",A):G["$.__views.window!close!onClose"]=!0,e?I.__views.window.addEventListener("open",e):G["$.__views.window!open!open"]=!0,t?I.__views.window.addEventListener("click",t):G["$.__views.window!click!blur"]=!0,I.__views.__alloyId133=Ti.UI.createScrollView({layout:"vertical",left:"20dp",right:"20dp",top:"0",id:"__alloyId133"}),I.__views.window.add(I.__views.__alloyId133),I.__views.__alloyId134=Ti.UI.createView({height:"20dp",width:Ti.UI.FILL,id:"__alloyId134"}),I.__views.__alloyId133.add(I.__views.__alloyId134),I.__views.categoriesLbl=Ti.UI.createLabel({width:Alloy.Globals.Styles.labelWidth,height:Alloy.Globals.Styles.labelHeight,color:Alloy.Globals.Styles.labelColor,left:Alloy.Globals.Styles.labelLeft,right:Alloy.Globals.Styles.labelRight,textAlign:Alloy.Globals.Styles.labelTextAlign,font:{fontSize:"17dp",fontFamily:"Avenir Next Condensed"},id:"categoriesLbl",textid:"categories"}),I.__views.__alloyId133.add(I.__views.categoriesLbl),I.__views.categories=Ti.UI.createView({width:Alloy.Globals.Styles.inputWidth,height:Alloy.Globals.Styles.inputHeight,top:Alloy.Globals.Styles.inputUp,bottom:"10dp",left:Alloy.Globals.Styles.inputLeft,style:Titanium.UI.iPhone.SystemButtonStyle.PLAIN,textAlign:"left",borderColor:"#ccc",borderStyle:1,borderWidth:"1dp",backgroundColor:"#fff",color:Alloy.Globals.Styles.inputColor,id:"categories"}),I.__views.__alloyId133.add(I.__views.categories),h?I.__views.categories.addEventListener("click",h):G["$.__views.categories!click!categories"]=!0,I.__views.__alloyId135=Ti.UI.createLabel({width:Ti.UI.SIZE,left:"5dp",textAlign:Ti.UI.TEXT_ALIGNMENT_LEFT,font:{fontSize:"15dp",fontFamily:"Arial"},textid:"select_category",id:"__alloyId135"}),I.__views.categories.add(I.__views.__alloyId135),I.__views.selectedCategories=Ti.UI.createLabel({height:"20dp",left:"52dp",right:"15dp",top:"7dp",color:"#aaa",textAlign:Ti.UI.TEXT_ALIGNMENT_LEFT,font:{fontSize:"12dp",fontFamily:"Arial"},id:"selectedCategories"}),I.__views.categories.add(I.__views.selectedCategories),I.__views.__alloyId136=Ti.UI.createLabel({width:"20dp",height:"20dp",right:"5dp",top:"5dp",backgroundImage:"images/icon_listItem.png",backgroundRepeat:!1,id:"__alloyId136"}),I.__views.categories.add(I.__views.__alloyId136),I.__views.titleLbl=Ti.UI.createLabel({width:Alloy.Globals.Styles.labelWidth,height:Alloy.Globals.Styles.labelHeight,color:Alloy.Globals.Styles.labelColor,left:Alloy.Globals.Styles.labelLeft,right:Alloy.Globals.Styles.labelRight,textAlign:Alloy.Globals.Styles.labelTextAlign,font:{fontSize:"17dp",fontFamily:"Avenir Next Condensed"},id:"titleLbl",textid:"title"}),I.__views.__alloyId133.add(I.__views.titleLbl),I.__views.title=Ti.UI.createTextField({width:Alloy.Globals.Styles.inputWidth,height:Alloy.Globals.Styles.inputHeight,top:Alloy.Globals.Styles.inputUp,bottom:"10dp",left:Alloy.Globals.Styles.inputLeft,borderColor:"#ccc",borderStyle:1,borderWidth:"1dp",textAlign:Alloy.Globals.Styles.inputTextAlign,font:{fontSize:"15dp",fontFamily:"Arial"},backgroundColor:"#fff",color:Alloy.Globals.Styles.inputColor,id:"title"}),I.__views.__alloyId133.add(I.__views.title),o?I.__views.title.addEventListener("focus",o):G["$.__views.title!focus!focus"]=!0,I.__views.priceLbl=Ti.UI.createLabel({width:Alloy.Globals.Styles.labelWidth,height:Alloy.Globals.Styles.labelHeight,color:Alloy.Globals.Styles.labelColor,left:Alloy.Globals.Styles.labelLeft,right:Alloy.Globals.Styles.labelRight,textAlign:Alloy.Globals.Styles.labelTextAlign,font:{fontSize:"17dp",fontFamily:"Avenir Next Condensed"},id:"priceLbl",textid:"price"}),I.__views.__alloyId133.add(I.__views.priceLbl),I.__views.price=Ti.UI.createTextField({width:Alloy.Globals.Styles.inputWidth,height:Alloy.Globals.Styles.inputHeight,top:Alloy.Globals.Styles.inputUp,bottom:"10dp",left:Alloy.Globals.Styles.inputLeft,borderColor:"#ccc",borderStyle:1,borderWidth:"1dp",textAlign:Alloy.Globals.Styles.inputTextAlign,font:{fontSize:"15dp",fontFamily:"Arial"},backgroundColor:"#fff",color:Alloy.Globals.Styles.inputColor,id:"price",keyboardType:Ti.UI.KEYBOARD_DECIMAL_PAD}),I.__views.__alloyId133.add(I.__views.price),o?I.__views.price.addEventListener("focus",o):G["$.__views.price!focus!focus"]=!0,I.__views.descriptionLbl=Ti.UI.createLabel({width:Alloy.Globals.Styles.labelWidth,height:Alloy.Globals.Styles.labelHeight,color:Alloy.Globals.Styles.labelColor,left:Alloy.Globals.Styles.labelLeft,right:Alloy.Globals.Styles.labelRight,textAlign:Alloy.Globals.Styles.labelTextAlign,font:{fontSize:"17dp",fontFamily:"Avenir Next Condensed"},id:"descriptionLbl",textid:"description"}),I.__views.__alloyId133.add(I.__views.descriptionLbl),I.__views.description=Ti.UI.createTextArea(function(){var e={};return Alloy.Globals.isHe&&_.extend(e,{textAlign:"right"}),_.extend(e,{width:Alloy.Globals.Styles.inputWidth,height:Alloy.Globals.Styles.inputAreaHeight,top:Alloy.Globals.Styles.inputUp,bottom:"10dp",left:Alloy.Globals.Styles.inputLeft,borderColor:"#ccc",borderStyle:1,borderWidth:"1dp",textAlign:Alloy.Globals.Styles.inputTextAlign,font:{fontSize:"15dp",fontFamily:"Arial"},backgroundColor:"#fff",color:Alloy.Globals.Styles.inputColor,id:"description",suppressReturn:"false",returnKeyType:Ti.UI.RETURNKEY_NEXT}),e}()),I.__views.__alloyId133.add(I.__views.description),o?I.__views.description.addEventListener("focus",o):G["$.__views.description!focus!focus"]=!0,I.__views.adressLbl=Ti.UI.createLabel({width:Alloy.Globals.Styles.labelWidth,height:Alloy.Globals.Styles.labelHeight,color:Alloy.Globals.Styles.labelColor,left:Alloy.Globals.Styles.labelLeft,right:Alloy.Globals.Styles.labelRight,textAlign:Alloy.Globals.Styles.labelTextAlign,font:{fontSize:"17dp",fontFamily:"Avenir Next Condensed"},id:"adressLbl",textid:"address"}),I.__views.__alloyId133.add(I.__views.adressLbl),I.__views.__alloyId137=Ti.UI.createView({layout:"absolute",width:Alloy.Globals.Styles.inputWidth,height:Alloy.Globals.Styles.inputAreaHeight,top:Alloy.Globals.Styles.inputUp,bottom:"10dp",left:Alloy.Globals.Styles.inputLeft,borderColor:"#ccc",borderStyle:1,borderWidth:"1dp",font:{fontSize:"15dp",fontFamily:"Arial"},backgroundColor:"#fff",color:Alloy.Globals.Styles.inputColor,id:"__alloyId137"}),I.__views.__alloyId133.add(I.__views.__alloyId137),I.__views.address=Ti.UI.createTextField({width:"160dp",height:Alloy.Globals.Styles.inputAreaHeight,top:"0dp",left:"2dp",textAlign:Alloy.Globals.Styles.inputTextAlign,font:{fontSize:"15dp",fontFamily:"Arial"},color:Alloy.Globals.Styles.inputColor,paddingLeft:"5dp",id:"address",returnKeyType:Ti.UI.RETURNKEY_SEARCH}),I.__views.__alloyId137.add(I.__views.address),s?I.__views.address.addEventListener("return",s):G["$.__views.address!return!search"]=!0,o?I.__views.address.addEventListener("focus",o):G["$.__views.address!focus!focus"]=!0,I.__views.customLocation=Ti.UI.createButton({width:"30dp",height:"30dp",bottom:"0dp",right:"0dp",font:{fontFamily:"Avenir Next Condensed",fontSize:"20dp"},color:"#fff",textAlign:"center",verticalAlign:"center",backgroundColor:Alloy.Globals.Styles.buttonBg,backgroundImage:"images/icon_location.png",backgroundRepeat:!1,id:"customLocation"}),I.__views.__alloyId137.add(I.__views.customLocation),a?I.__views.customLocation.addEventListener("touchstart",a):G["$.__views.customLocation!touchstart!buttonTouchStart"]=!0,r?I.__views.customLocation.addEventListener("touchend",r):G["$.__views.customLocation!touchend!buttonTouchEnd"]=!0,I.__views.imageLbl=Ti.UI.createLabel({width:Alloy.Globals.Styles.labelWidth,height:Alloy.Globals.Styles.labelHeight,color:Alloy.Globals.Styles.labelColor,left:Alloy.Globals.Styles.labelLeft,right:Alloy.Globals.Styles.labelRight,textAlign:Alloy.Globals.Styles.labelTextAlign,font:{fontSize:"17dp",fontFamily:"Avenir Next Condensed"},id:"imageLbl",textid:"images"}),I.__views.__alloyId133.add(I.__views.imageLbl),I.__views.__alloyId138=Ti.UI.createView({width:Alloy.Globals.Styles.inputWidth,height:Ti.UI.SIZE,top:Alloy.Globals.Styles.inputUp,left:Alloy.Globals.Styles.inputLeft,borderColor:"#ccc",borderStyle:1,borderWidth:"1dp",backgroundColor:"#fff",id:"__alloyId138"}),I.__views.__alloyId133.add(I.__views.__alloyId138),I.__views.images=Ti.UI.createView({height:Ti.UI.SIZE,top:"5dp",left:"5dp",id:"images",layout:"horizontal"}),I.__views.__alloyId138.add(I.__views.images),m?I.__views.images.addEventListener("click",m):G["$.__views.images!click!onClickImages"]=!0,I.__views.addPhoto=Ti.UI.createButton({width:"56dp",height:"56dp",right:"5dp",bottom:"5dp",backgroundColor:Alloy.Globals.Styles.buttonBg,backgroundImage:"images/icon_gallery.png",id:"addPhoto"}),I.__views.images.add(I.__views.addPhoto),b?I.__views.addPhoto.addEventListener("click",b):G["$.__views.addPhoto!click!addPhoto"]=!0,I.__views.howToDeleteImageLbl=Ti.UI.createLabel({width:Ti.UI.FILL,height:"20dp",bottom:"10dp",textAlign:Alloy.Globals.Styles.imageSelectTipTextAlign,font:{fontFamily:"Avenir Next Condensed",fontSize:"12dp"},color:"#555",id:"howToDeleteImageLbl",textid:"tap_to_delete_image",visible:"false"}),I.__views.__alloyId133.add(I.__views.howToDeleteImageLbl),I.__views.switchLbl=Ti.UI.createLabel({width:Alloy.Globals.Styles.labelWidth,height:Alloy.Globals.Styles.labelHeight,color:Alloy.Globals.Styles.labelColor,left:Alloy.Globals.Styles.labelLeft,right:Alloy.Globals.Styles.labelRight,textAlign:Alloy.Globals.Styles.labelTextAlign,font:{fontSize:"17dp",fontFamily:"Avenir Next Condensed"},id:"switchLbl",textid:"active"}),I.__views.__alloyId133.add(I.__views.switchLbl),I.__views.switch_=Ti.UI.createSwitch({height:Alloy.Globals.Styles.inputAreaHeight,top:Alloy.Globals.Styles.inputUp,bottom:"10dp",left:Alloy.Globals.Styles.inputLeft,value:!0,id:"switch_"}),I.__views.__alloyId133.add(I.__views.switch_),I.__views.itemIsLoad=Ti.UI.createLabel({width:Alloy.Globals.Styles.labelWidth,height:Alloy.Globals.Styles.labelHeight,color:Alloy.Globals.Styles.labelColor,left:Alloy.Globals.Styles.labelLeft,right:Alloy.Globals.Styles.labelRight,textAlign:Alloy.Globals.Styles.labelTextAlign,font:{fontSize:"17dp",fontFamily:"Avenir Next Condensed"},id:"itemIsLoad",textid:"itemIsLoad",visible:"false"}),I.__views.__alloyId133.add(I.__views.itemIsLoad),I.__views.button=Ti.UI.createButton({width:"120dp",height:"40dp",bottom:"20dp",style:Titanium.UI.iPhone.SystemButtonStyle.PLAIN,font:{fontFamily:"Avenir Next Condensed",fontSize:"20dp"},color:"#fff",textAlign:"center",verticalAlign:"center",backgroundColor:Alloy.Globals.Styles.buttonBg,titleid:"add_advert_button",id:"button"}),I.__views.__alloyId133.add(I.__views.button),a?I.__views.button.addEventListener("touchstart",a):G["$.__views.button!touchstart!buttonTouchStart"]=!0,r?I.__views.button.addEventListener("touchend",r):G["$.__views.button!touchend!buttonTouchEnd"]=!0,I.__views.cancel_button=Ti.UI.createButton({width:"120dp",height:"40dp",bottom:"20dp",style:Titanium.UI.iPhone.SystemButtonStyle.PLAIN,font:{fontFamily:"Avenir Next Condensed",fontSize:"20dp"},color:"#fff",textAlign:"center",verticalAlign:"center",backgroundColor:Alloy.Globals.Styles.buttonBg,titleid:"cancel",id:"cancel_button"}),I.__views.__alloyId133.add(I.__views.cancel_button),a?I.__views.cancel_button.addEventListener("touchstart",a):G["$.__views.cancel_button!touchstart!buttonTouchStart"]=!0,r?I.__views.cancel_button.addEventListener("touchend",r):G["$.__views.cancel_button!touchend!buttonTouchEnd"]=!0,I.__views.delete_button=Ti.UI.createButton({width:"120dp",height:"40dp",bottom:"20dp",style:Titanium.UI.iPhone.SystemButtonStyle.PLAIN,font:{fontFamily:"Avenir Next Condensed",fontSize:"20dp"},color:"#fff",textAlign:"center",verticalAlign:"center",backgroundColor:Alloy.Globals.Styles.buttonBg,titleid:"delete_advert_button",id:"delete_button"}),I.__views.__alloyId133.add(I.__views.delete_button),a?I.__views.delete_button.addEventListener("touchstart",a):G["$.__views.delete_button!touchstart!buttonTouchStart"]=!0,r?I.__views.delete_button.addEventListener("touchend",r):G["$.__views.delete_button!touchend!buttonTouchEnd"]=!0,I.__views.pickerWrap=Ti.UI.createView({layout:"vertical",width:Ti.UI.FILL,height:Ti.UI.SIZE,bottom:"0",id:"pickerWrap"}),I.__views.window.add(I.__views.pickerWrap),T.destroy=function(){},_.extend(I,I.__views);var x=!1,C=!1;arguments[0]&&arguments[0].advertId&&(C=arguments[0].advertId);var E=Alloy.Globals.progress,k=!1;arguments[0]&&arguments[0].callback&&(k=arguments[0].callback);var U=Alloy.Globals.indicator,N=Alloy.Globals.errors,P=Alloy.Globals.core;address=!1,lat=!1,lng=!1,date=0,subCategories=[],images=[],imagesToDelete=[];var F,D={options:["Make Photo","Choose Photo","Cancel"],cancel:2},O=Titanium.UI.createOptionDialog(D);O.addEventListener("click",function(e){0==e.index&&v(),1==e.index&&g()});var M=0;G["$.__views.window!close!onClose"]&&I.__views.window.addEventListener("close",A),G["$.__views.window!open!open"]&&I.__views.window.addEventListener("open",e),G["$.__views.window!click!blur"]&&I.__views.window.addEventListener("click",t),G["$.__views.categories!click!categories"]&&I.__views.categories.addEventListener("click",h),G["$.__views.title!focus!focus"]&&I.__views.title.addEventListener("focus",o),G["$.__views.price!focus!focus"]&&I.__views.price.addEventListener("focus",o),G["$.__views.description!focus!focus"]&&I.__views.description.addEventListener("focus",o),G["$.__views.address!return!search"]&&I.__views.address.addEventListener("return",s),G["$.__views.address!focus!focus"]&&I.__views.address.addEventListener("focus",o),G["$.__views.customLocation!touchstart!buttonTouchStart"]&&I.__views.customLocation.addEventListener("touchstart",a),G["$.__views.customLocation!touchend!buttonTouchEnd"]&&I.__views.customLocation.addEventListener("touchend",r),G["$.__views.images!click!onClickImages"]&&I.__views.images.addEventListener("click",m),G["$.__views.addPhoto!click!addPhoto"]&&I.__views.addPhoto.addEventListener("click",b),G["$.__views.button!touchstart!buttonTouchStart"]&&I.__views.button.addEventListener("touchstart",a),G["$.__views.button!touchend!buttonTouchEnd"]&&I.__views.button.addEventListener("touchend",r),G["$.__views.cancel_button!touchstart!buttonTouchStart"]&&I.__views.cancel_button.addEventListener("touchstart",a),G["$.__views.cancel_button!touchend!buttonTouchEnd"]&&I.__views.cancel_button.addEventListener("touchend",r),G["$.__views.delete_button!touchstart!buttonTouchStart"]&&I.__views.delete_button.addEventListener("touchstart",a),G["$.__views.delete_button!touchend!buttonTouchEnd"]&&I.__views.delete_button.addEventListener("touchend",r),_.extend(I,T)}var Alloy=require("alloy"),Backbone=Alloy.Backbone,_=Alloy._;module.exports=Controller;