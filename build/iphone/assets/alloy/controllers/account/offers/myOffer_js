function __processArg(e,t){var o=null;return e&&(o=e[t]||null,delete e[t]),o}function Controller(){function e(){d.openIndicator(),a.fetch({data:{id:s},success:function(){switch(a=a.toJSON(),l.advert.text=a.advert,l.user.text=a.toUser,l.email.text=a.email,l.phone.text=a.phone,a.state){case 1:default:a.state=L("new");break;case 3:a.state=L("declined"),""!==a.answer&&(l.answerLbl.show(),l.answerMsg.text=a.answer,l.scrollView.remove(l.answer),l.answerMsg.show());break;case 4:a.state=L("accepted"),""!==a.answer&&(l.answerLbl.show(),l.answerMsg.text=a.answer,l.scrollView.remove(l.answer),l.answerMsg.show())}l.state.text=a.state,a.price&&(l.price.visible=!0,l.priceLbl.visible=!0,l.price.text=a.price,l.imageLbl.bottom=0,l.imageView.bottom=0),a.imageId&&(l.imageLbl.visible=!0,c=a.imageServer+"/"+a.imageId+Alloy.Globals.imageSizes.supplier.edit(),l.imageView.image=c,l.imageView.visible=!0,l.imageView.height=Ti.UI.SIZE,l.imageView.bottom="10dp",l.price.bottom=0,l.priceLbl.bottom=0),l.description.text=a.description,d.closeIndicator()},error:function(){d.closeIndicator()}})}function t(){Alloy.Collections.offers.fetch({success:function(){},error:function(){}})}function o(){}function i(){Titanium.Platform.openURL("tel:"+a.phone)}require("alloy/controllers/BaseController").apply(this,Array.prototype.slice.call(arguments)),this.__controllerPath="account/offers/myOffer",arguments[0]&&(__processArg(arguments[0],"__parentSymbol"),__processArg(arguments[0],"$model"),__processArg(arguments[0],"__itemTemplate"));var l=this,n={},r={};l.__views.window=Ti.UI.createWindow({backgroundImage:Alloy.Globals.Styles.backgroundImage,layout:"vertical",fullscreen:"true",id:"window",titleid:"offer"}),l.__views.window&&l.addTopLevelView(l.__views.window),e?l.__views.window.addEventListener("open",e):r["$.__views.window!open!open"]=!0,t?l.__views.window.addEventListener("close",t):r["$.__views.window!close!close"]=!0,l.__views.scrollView=Ti.UI.createScrollView({layout:"vertical",left:"20dp",right:"20dp",id:"scrollView"}),l.__views.window.add(l.__views.scrollView),l.__views.__alloyId61=Ti.UI.createLabel({width:Alloy.Globals.Styles.labelWidth,height:Alloy.Globals.Styles.labelHeight,color:Alloy.Globals.Styles.labelColor,left:Alloy.Globals.Styles.labelLeft,right:Alloy.Globals.Styles.labelRight,textAlign:Alloy.Globals.Styles.labelTextAlign,font:{fontSize:"17dp",fontFamily:"Avenir Next Condensed"},textid:"advert",id:"__alloyId61"}),l.__views.scrollView.add(l.__views.__alloyId61),l.__views.advert=Ti.UI.createLabel({width:Alloy.Globals.Styles.inputWidth,height:Ti.UI.SIZE,top:"-28dp",bottom:"10dp",left:Alloy.Globals.Styles.inputLeft,right:Alloy.Globals.Styles.inputRight,textAlign:Alloy.Globals.Styles.inputTextAlign,font:{fontSize:"17dp",fontFamily:"Avenir Next Condensed"},color:"#555",id:"advert"}),l.__views.scrollView.add(l.__views.advert),l.__views.toLbl=Ti.UI.createLabel({width:Alloy.Globals.Styles.labelWidth,height:Alloy.Globals.Styles.labelHeight,color:Alloy.Globals.Styles.labelColor,left:Alloy.Globals.Styles.labelLeft,right:Alloy.Globals.Styles.labelRight,textAlign:Alloy.Globals.Styles.labelTextAlign,font:{fontSize:"17dp",fontFamily:"Avenir Next Condensed"},textid:"to",id:"toLbl"}),l.__views.scrollView.add(l.__views.toLbl),l.__views.user=Ti.UI.createLabel({width:Alloy.Globals.Styles.inputWidth,height:Ti.UI.SIZE,top:"-28dp",bottom:"10dp",left:Alloy.Globals.Styles.inputLeft,right:Alloy.Globals.Styles.inputRight,textAlign:Alloy.Globals.Styles.inputTextAlign,font:{fontSize:"17dp",fontFamily:"Avenir Next Condensed"},color:"#555",id:"user"}),l.__views.scrollView.add(l.__views.user),l.__views.__alloyId62=Ti.UI.createLabel({width:Alloy.Globals.Styles.labelWidth,height:Alloy.Globals.Styles.labelHeight,color:Alloy.Globals.Styles.labelColor,left:Alloy.Globals.Styles.labelLeft,right:Alloy.Globals.Styles.labelRight,textAlign:Alloy.Globals.Styles.labelTextAlign,font:{fontSize:"17dp",fontFamily:"Avenir Next Condensed"},id:"__alloyId62"}),l.__views.scrollView.add(l.__views.__alloyId62),l.__views.email=Ti.UI.createLabel({width:Alloy.Globals.Styles.inputWidth,height:Ti.UI.SIZE,top:"-28dp",bottom:"10dp",left:Alloy.Globals.Styles.inputLeft,right:Alloy.Globals.Styles.inputRight,textAlign:Alloy.Globals.Styles.inputTextAlign,font:{fontSize:"17dp",fontFamily:"Avenir Next Condensed"},color:"#555",id:"email"}),l.__views.scrollView.add(l.__views.email),o?l.__views.email.addEventListener("click",o):r["$.__views.email!click!onClickEmail"]=!0,l.__views.__alloyId63=Ti.UI.createLabel({width:Alloy.Globals.Styles.labelWidth,height:Alloy.Globals.Styles.labelHeight,color:Alloy.Globals.Styles.labelColor,left:Alloy.Globals.Styles.labelLeft,right:Alloy.Globals.Styles.labelRight,textAlign:Alloy.Globals.Styles.labelTextAlign,font:{fontSize:"17dp",fontFamily:"Avenir Next Condensed"},id:"__alloyId63"}),l.__views.scrollView.add(l.__views.__alloyId63),l.__views.phone=Ti.UI.createLabel({width:Alloy.Globals.Styles.inputWidth,height:Ti.UI.SIZE,top:"-28dp",bottom:"10dp",left:Alloy.Globals.Styles.inputLeft,right:Alloy.Globals.Styles.inputRight,textAlign:Alloy.Globals.Styles.inputTextAlign,font:{fontSize:"17dp",fontFamily:"Avenir Next Condensed"},color:"#555",id:"phone"}),l.__views.scrollView.add(l.__views.phone),i?l.__views.phone.addEventListener("click",i):r["$.__views.phone!click!phoneCall"]=!0,l.__views.imageLbl=Ti.UI.createLabel({width:Alloy.Globals.Styles.labelWidth,height:Alloy.Globals.Styles.labelHeight,color:Alloy.Globals.Styles.labelColor,left:Alloy.Globals.Styles.labelLeft,right:Alloy.Globals.Styles.labelRight,textAlign:Alloy.Globals.Styles.labelTextAlign,font:{fontSize:"17dp",fontFamily:"Avenir Next Condensed"},id:"imageLbl",textid:"barter_image",visible:"false"}),l.__views.scrollView.add(l.__views.imageLbl),l.__views.imageView=Ti.UI.createImageView({width:Alloy.Globals.Styles.inputWidth,bottom:"40dp",top:Alloy.Globals.Styles.inputUp,left:Alloy.Globals.Styles.inputLeft,id:"imageView",height:"0",visible:"false"}),l.__views.scrollView.add(l.__views.imageView),l.__views.priceLbl=Ti.UI.createLabel({width:Alloy.Globals.Styles.labelWidth,height:Alloy.Globals.Styles.labelHeight,color:Alloy.Globals.Styles.labelColor,left:Alloy.Globals.Styles.labelLeft,right:Alloy.Globals.Styles.labelRight,textAlign:Alloy.Globals.Styles.labelTextAlign,font:{fontSize:"17dp",fontFamily:"Avenir Next Condensed"},id:"priceLbl",textid:"price",visible:"false"}),l.__views.scrollView.add(l.__views.priceLbl),l.__views.price=Ti.UI.createLabel({width:Alloy.Globals.Styles.inputWidth,height:Ti.UI.SIZE,top:"-28dp",bottom:"10dp",left:Alloy.Globals.Styles.inputLeft,right:Alloy.Globals.Styles.inputRight,textAlign:Alloy.Globals.Styles.inputTextAlign,font:{fontSize:"17dp",fontFamily:"Avenir Next Condensed"},color:"#555",id:"price",visible:"false"}),l.__views.scrollView.add(l.__views.price),l.__views.__alloyId64=Ti.UI.createLabel({width:Alloy.Globals.Styles.labelWidth,height:Alloy.Globals.Styles.labelHeight,color:Alloy.Globals.Styles.labelColor,left:Alloy.Globals.Styles.labelLeft,right:Alloy.Globals.Styles.labelRight,textAlign:Alloy.Globals.Styles.labelTextAlign,font:{fontSize:"17dp",fontFamily:"Avenir Next Condensed"},textid:"description",id:"__alloyId64"}),l.__views.scrollView.add(l.__views.__alloyId64),l.__views.description=Ti.UI.createLabel({width:Alloy.Globals.Styles.inputWidth,height:Ti.UI.SIZE,top:"-28dp",bottom:"10dp",left:Alloy.Globals.Styles.inputLeft,right:Alloy.Globals.Styles.inputRight,textAlign:Alloy.Globals.Styles.inputTextAlign,font:{fontSize:"17dp",fontFamily:"Avenir Next Condensed"},color:"#555",id:"description"}),l.__views.scrollView.add(l.__views.description),l.__views.__alloyId65=Ti.UI.createLabel({width:Alloy.Globals.Styles.labelWidth,height:Alloy.Globals.Styles.labelHeight,color:Alloy.Globals.Styles.labelColor,left:Alloy.Globals.Styles.labelLeft,right:Alloy.Globals.Styles.labelRight,textAlign:Alloy.Globals.Styles.labelTextAlign,font:{fontSize:"17dp",fontFamily:"Avenir Next Condensed"},textid:"state",id:"__alloyId65"}),l.__views.scrollView.add(l.__views.__alloyId65),l.__views.state=Ti.UI.createLabel({width:Alloy.Globals.Styles.inputWidth,height:Ti.UI.SIZE,top:"-28dp",bottom:"10dp",left:Alloy.Globals.Styles.inputLeft,right:Alloy.Globals.Styles.inputRight,textAlign:Alloy.Globals.Styles.inputTextAlign,font:{fontSize:"17dp",fontFamily:"Avenir Next Condensed"},color:"#555",id:"state"}),l.__views.scrollView.add(l.__views.state),l.__views.answerLbl=Ti.UI.createLabel({width:Alloy.Globals.Styles.labelWidth,height:Alloy.Globals.Styles.labelHeight,color:Alloy.Globals.Styles.labelColor,left:Alloy.Globals.Styles.labelLeft,right:Alloy.Globals.Styles.labelRight,textAlign:Alloy.Globals.Styles.labelTextAlign,font:{fontSize:"17dp",fontFamily:"Avenir Next Condensed"},id:"answerLbl",textid:"answer",visible:"false"}),l.__views.scrollView.add(l.__views.answerLbl),l.__views.answer=Ti.UI.createTextArea(function(){var e={};return Alloy.Globals.isHe&&_.extend(e,{textAlign:"right"}),_.extend(e,{width:Alloy.Globals.Styles.inputWidth,height:Alloy.Globals.Styles.inputAreaHeight,top:Alloy.Globals.Styles.inputUp,bottom:"10dp",left:Alloy.Globals.Styles.inputLeft,borderColor:"#ccc",borderStyle:1,borderWidth:"1dp",textAlign:Alloy.Globals.Styles.inputTextAlign,font:{fontSize:"15dp",fontFamily:"Arial"},backgroundColor:"#fff",color:Alloy.Globals.Styles.inputColor,id:"answer",visible:"false"}),e}()),l.__views.scrollView.add(l.__views.answer),l.__views.answerMsg=Ti.UI.createLabel({width:Alloy.Globals.Styles.inputWidth,height:Ti.UI.SIZE,top:"-28dp",bottom:"10dp",left:Alloy.Globals.Styles.inputLeft,right:Alloy.Globals.Styles.inputRight,textAlign:Alloy.Globals.Styles.inputTextAlign,font:{fontSize:"17dp",fontFamily:"Avenir Next Condensed"},color:"#555",id:"answerMsg",visible:"false"}),l.__views.scrollView.add(l.__views.answerMsg),n.destroy=function(){},_.extend(l,l.__views);var a=Alloy.createModel("offer"),s=arguments[0].offerId,d=Alloy.Globals.indicator,c=!1;r["$.__views.window!open!open"]&&l.__views.window.addEventListener("open",e),r["$.__views.window!close!close"]&&l.__views.window.addEventListener("close",t),r["$.__views.email!click!onClickEmail"]&&l.__views.email.addEventListener("click",o),r["$.__views.phone!click!phoneCall"]&&l.__views.phone.addEventListener("click",i),_.extend(l,n)}var Alloy=require("alloy"),Backbone=Alloy.Backbone,_=Alloy._;module.exports=Controller;