function __processArg(e,t){var n=null;return e&&(n=e[t]||null,delete e[t]),n}function Controller(){function e(){Ti.App.addEventListener("account:updateAdverts",n),n()}function t(){Ti.App.removeEventListener("account:updateAdverts",n),Alloy.Collections.adverts.reset()}function n(){Alloy.Globals.core.apiToken()&&(s.openIndicator(),Alloy.Collections.adverts.fetch({success:function(){Alloy.Globals.core.createRows(Alloy.Collections.adverts,i,r.adverts,"account/adverts/row"),s.closeIndicator()},error:function(){s.closeIndicator()}}))}function i(e){var t=e.toJSON();return t.price=t.currency+" "+t.price,t.images=t.images&&t.images.length>0?JSON.parse(t.images):[],t.images.length>0&&(t.image="http://"+Ti.App.serverDomain+"/api/"+Titanium.App.ApiVersion+"/image/"+t.images[0]+Alloy.Globals.imageSizes.advert.row()),t}require("alloy/controllers/BaseController").apply(this,Array.prototype.slice.call(arguments)),this.__controllerPath="account/adverts/index",arguments[0]&&(__processArg(arguments[0],"__parentSymbol"),__processArg(arguments[0],"$model"),__processArg(arguments[0],"__itemTemplate"));var r=this,o={},a={};r.__views.window=Ti.UI.createWindow({backgroundImage:"images/background.png",layout:"vertical",id:"window",fullscreen:"true",titleid:"my_adverts"}),r.__views.window&&r.addTopLevelView(r.__views.window),e?r.__views.window.addEventListener("open",e):a["$.__views.window!open!open"]=!0,t?r.__views.window.addEventListener("close",t):a["$.__views.window!close!close"]=!0,r.__views.adverts=Ti.UI.createTableView({backgroundColor:"#00ffffff",id:"adverts"}),r.__views.window.add(r.__views.adverts),o.destroy=function(){},_.extend(r,r.__views);var s=Alloy.Globals.indicator,l=Ti.UI.createButton({titleid:"add"});l.addEventListener("click",function(){var e=Alloy.createController("add/advert",{tab:Alloy.CFG.tabAccount}).getView();Alloy.CFG.tabAccount.open(e)}),r.window.rightNavButton=l,a["$.__views.window!open!open"]&&r.__views.window.addEventListener("open",e),a["$.__views.window!close!close"]&&r.__views.window.addEventListener("close",t),_.extend(r,o)}var Alloy=require("alloy"),Backbone=Alloy.Backbone,_=Alloy._;module.exports=Controller;