function __processArg(e,t){var o=null;return e&&(o=e[t]||null,delete e[t]),o}function Controller(){function e(e){t(e)}function t(e){e.source.id!==b.about.id&&b.about.blur(),e.source.id!==b.name.id&&b.name.blur(),e.source.id!==b.companyNumber.id&&b.companyNumber.blur(),e.source.id!==b.phone.id&&b.phone.blur(),e.source.id!==b.email.id&&b.email.blur(),e.source.id!==b.address.id&&b.address.blur(),e.source.id!==b.workingHours.id&&b.workingHours.blur(),e.source.id!==b.terms.id&&b.terms.blur()}function o(e){t(e)}function i(e){e.source.backgroundColor=Alloy.Globals.Styles.buttonBgOnTap}function r(e){C.openIndicator(),e.source.backgroundColor=Alloy.Globals.Styles.buttonBg,"update"==e.source.id?l():"customLocation"==e.source.id&&d()}function n(){b.selectedCategories.text="";for(var e in S.currentSectionCategories())if(Object.size(S.currentSectionCategories()[e])>0){e=e.replace("_","");var t=Alloy.Collections.categories.get(e);t&&(b.selectedCategories.text+=""==b.selectedCategories.text?t.attributes.name:", "+t.attributes.name)}}function a(){}function l(){if(!Alloy.Globals.core.apiToken()){var e=Titanium.UI.createAlertDialog({title:L("signup_or_signin_title"),message:L("signup_or_signin_message"),buttonNames:[L("no"),L("yes")],cancel:0});return e.addEventListener("click",function(e){e.cancel!==e.index&&!0!==e.cancel&&Alloy.Globals.tabGroup.setActiveTab(Alloy.CFG.tabAccount)}),C.closeIndicator(),void e.show()}if(0==subCategories.length)return C.closeIndicator(),void Alloy.Globals.core.showErrorDialog(L("please_select_category"));for(var t=[],o=0;o<subCategories.length;++o){var i=subCategories[o];t.push(i.Id?i.Id:i)}var r=Alloy.createModel("company",{name:b.name.value,phone:b.phone.value,email:b.email.value,address:b.address.value,lat:parseFloat(lat),lng:parseFloat(lng),subCategories:JSON.stringify(t),about:b.about.value,workingHours:b.workingHours.value,terms:b.terms.value,number:b.companyNumber.value,haveImage:!1!==image,language:Ti.Platform.locale});r.localValidate(p)?lat&&lng&&b.address.value===address||geo.geocoding(b.address.value,function(e){if(geodata.error)return void Alloy.Globals.core.showErrorDialog(L(geodata.message));if(e.error==geo.elementStatuses.ZERO_RESULTS||e.error==geo.elementStatuses.NOT_FOUND)return C.closeIndicator(),void Alloy.Globals.core.showErrorDialog(L("address_not_found"));if(!(e&&e.response&&e.response.results&&e.response.results.length>0))return C.closeIndicator(),void Alloy.Globals.core.showErrorDialog(L("address_not_found"));if(r.attributes.lat=parseFloat(e.response.results[0].geometry.location.lat),r.attributes.lng=parseFloat(e.response.results[0].geometry.location.lng),Alloy.Globals.profile.supplier)s(r);else{var t=Titanium.UI.createAlertDialog({message:L("only_register_company"),buttonNames:[L("cancel"),L("ok")],cancel:0});t.addEventListener("click",function(e){return e.cancel===e.index||!0===e.cancel?void C.closeIndicator():void s(r)}),t.show()}}):C.closeIndicator()}function s(e){Ti.API.info("Save company start"),e.save({},{success:function(e,t){if(Ti.App.fireEvent("account:itIsSupplier"),Ti.API.info("Company saved"),image&&imageUpdated){var o=Alloy.Globals.upload,i=[],r=1,n=400,l=image.height,s=image.width,d=Ti.UI.createImageView({image:image,width:s,height:l});l>s?(r=s/l,d.height=n,d.width=n*r):(r=l/s,d.width=n,d.height=n*r),image=d.toImage(),i.push(image),progress.openBar(),Ti.API.info("Save image company start"),o.start({type:o.types.logo,id:t,blobs:i,onerror:function(e){progress.closeBar(),Ti.API.info("Save image error"),Alloy.Globals.core.showErrorDialog(L("error_loading_image")),Ti.API.error(e.source)},onload:function(){progress.setBarValue(1),progress.closeBar(),a(),Ti.API.info("Image saved"),h()},onsendstream:function(e){progress.setBarValue(e.progress),Ti.API.info("progress - "+e.progress)}})}else a(),h();C.closeIndicator()},error:function(){C.closeIndicator()}})}function d(){var e=Alloy.Globals.geo;e.checkLocation(function(){return e.location.status!=e.errors.NONE?(Alloy.Globals.core.showErrorDialog(L(e.location.status.message)),void C.closeIndicator()):(lat=e.location.lat,lng=e.location.lng,void e.reverseGeocoding(e.location.latitude,e.location.longitude,function(e){C.closeIndicator(),e&&e.error?Alloy.Globals.core.showErrorDialog(L(e.message?e.message:e.error)):e&&e.response&&(e.response.results&&e.response.results[0]&&e.response.results[0].formatted_address?b.address.value=e.response.results[0].formatted_address:e.response.resourceSets&&e.response.resourceSets[0]&&e.response.resourceSets[0].resources&&e.response.resourceSets[0].resources[0]&&e.response.resourceSets[0].resources[0].address&&e.response.resourceSets[0].resources[0].address.formattedAddress&&(b.address.value=e.response.resourceSets[0].resources[0].address.formattedAddress))}))})}function c(){geo.geocoding(b.address.value,function(e){if(e.error)return void Alloy.Globals.core.showErrorDialog(L(e.message));if(e.error==geo.elementStatuses.ZERO_RESULTS||e.error==geo.elementStatuses.NOT_FOUND)return C.closeIndicator(),void Alloy.Globals.core.showErrorDialog(L("address_not_found"));for(var t=[],o=0;o<e.response.results.length;o++){var i=e.response.results[o];t.push({title:i.formatted_address,data:{lat:i.geometry.location.lat,lng:i.geometry.location.lng}})}var r=Alloy.createController("picker/genericPicker",{callback:function(e,t,o){b.address.value=e.title?e.title:e,e.data&&(lat=e.data.lat,lng=e.data.lng),o&&(x=o),t&&b.pickerWrap.removeAllChildren()},rowIndex:x,items:t}).getView();u(),b.pickerWrap.removeAllChildren(),b.pickerWrap.add(r)})}function u(){b.address.blur()}function h(){C.closeIndicator(),Alloy.Globals.core.showErrorDialog(L("company_updated_label")),Ti.App.fireEvent("account:updateProfile"),b.window.close(),G=!0}function f(){callback&&G&&callback(newSupplier)}function p(e){switch(e){case I.NO_COMPANY_NAME:b.name.focus();break;case I.NO_EMAIL:b.email.focus();break;case I.INVALID_EMAIL:b.email.focus();break;case I.NO_NUMBER:case I.INVALID_NUMBER:b.companyNumber.focus();break;case I.NO_PHONE:b.phone.focus();break;case I.INVALID_PHONE:b.phone.focus();break;case I.NO_ADDRESS:b.address.focus();break;case I.NO_ABOUT:b.about.focus();break;case I.NO_WORKING_HOURS:b.workingHours.focus();break;case I.NO_TERMS:b.terms.focus()}Alloy.Globals.core.showError(e)}function g(){M.show()}function y(){Titanium.Media.openPhotoGallery({success:function(e){e.mediaType==Titanium.Media.MEDIA_TYPE_PHOTO&&(image=e.media,b.imageView.image=image,b.deleteImage.visible=!0,b.imageView.height=Ti.UI.SIZE,b.imageView.bottom="10dp",b.imageView.visible=!0,imageUpdated=!0)}})}function m(){Titanium.Media.showCamera({success:function(e){e.mediaType==Titanium.Media.MEDIA_TYPE_PHOTO&&(image=e.media,b.imageView.image=image,b.deleteImage.visible=!0,b.imageView.visible=!0,b.imageView.height=Ti.UI.SIZE,b.imageView.bottom="10dp",imageUpdated=!0)},cancel:function(){},error:function(){}})}function v(){image=!1,imageUpdated=!1,b.imageView.image=null,b.imageView.visible=!1,b.imageView.height="0",b.imageView.bottom="0",b.deleteImage.visible=!1}function w(){Alloy.CFG.tabAccount.open(Alloy.createController("categories/index",{win:Alloy.CFG.tabAccount,name:L("categories"),forDeals:!0,sectionName:sectionName,closeCallback:function(){subCategories=[];for(var e in S.currentSectionCategories()){var t=S.currentSectionCategories()[e];for(var o in t)subCategories.push(S.currentSectionCategories()[e][o])}n()}}).getView())}require("alloy/controllers/BaseController").apply(this,Array.prototype.slice.call(arguments)),this.__controllerPath="account/company",arguments[0]&&(__processArg(arguments[0],"__parentSymbol"),__processArg(arguments[0],"$model"),__processArg(arguments[0],"__itemTemplate"));var b=this,A={},T={};b.__views.window=Ti.UI.createWindow({backgroundImage:Alloy.Globals.Styles.backgroundImage,layout:"absolute",id:"window",fullscreen:"true",titleid:"add_company"}),b.__views.window&&b.addTopLevelView(b.__views.window),e?b.__views.window.addEventListener("click",e):T["$.__views.window!click!blur"]=!0,f?b.__views.window.addEventListener("close",f):T["$.__views.window!close!close"]=!0,b.__views.__alloyId23=Ti.UI.createScrollView({layout:"vertical",left:"20dp",right:"20dp",top:"0",id:"__alloyId23"}),b.__views.window.add(b.__views.__alloyId23),b.__views.__alloyId24=Ti.UI.createView({height:"20dp",width:Ti.UI.FILL,id:"__alloyId24"}),b.__views.__alloyId23.add(b.__views.__alloyId24),b.__views.categoriesLbl=Ti.UI.createLabel({width:Alloy.Globals.Styles.labelWidth,height:Alloy.Globals.Styles.labelHeight,color:Alloy.Globals.Styles.labelColor,left:Alloy.Globals.Styles.labelLeft,right:Alloy.Globals.Styles.labelRight,textAlign:Alloy.Globals.Styles.labelTextAlign,font:{fontSize:"17dp",fontFamily:"Avenir Next Condensed"},id:"categoriesLbl",textid:"categories"}),b.__views.__alloyId23.add(b.__views.categoriesLbl),b.__views.categories=Ti.UI.createButton({width:Alloy.Globals.Styles.inputWidth,height:Alloy.Globals.Styles.inputHeight,top:Alloy.Globals.Styles.inputUp,bottom:"10dp",left:Alloy.Globals.Styles.inputLeft,style:Titanium.UI.iPhone.SystemButtonStyle.PLAIN,textAlign:"left",borderColor:"#ccc",borderStyle:1,borderWidth:"1dp",backgroundColor:"#fff",color:Alloy.Globals.Styles.inputColor,title:"",id:"categories"}),b.__views.__alloyId23.add(b.__views.categories),w?b.__views.categories.addEventListener("click",w):T["$.__views.categories!click!categories"]=!0,b.__views.__alloyId25=Ti.UI.createLabel({width:Ti.UI.SIZE,left:"5dp",textAlign:Ti.UI.TEXT_ALIGNMENT_LEFT,font:{fontSize:"15dp",fontFamily:"Arial"},textid:"select_category",id:"__alloyId25"}),b.__views.categories.add(b.__views.__alloyId25),b.__views.selectedCategories=Ti.UI.createLabel({height:"20dp",left:"52dp",right:"15dp",top:"7dp",color:"#aaa",textAlign:Ti.UI.TEXT_ALIGNMENT_LEFT,font:{fontSize:"12dp",fontFamily:"Arial"},id:"selectedCategories"}),b.__views.categories.add(b.__views.selectedCategories),b.__views.__alloyId26=Ti.UI.createLabel({width:"20dp",height:"20dp",right:"5dp",top:"5dp",backgroundImage:"images/icon_listItem.png",backgroundRepeat:!1,id:"__alloyId26"}),b.__views.categories.add(b.__views.__alloyId26),b.__views.nameLbl=Ti.UI.createLabel({width:Alloy.Globals.Styles.labelWidth,height:Alloy.Globals.Styles.labelHeight,color:Alloy.Globals.Styles.labelColor,left:Alloy.Globals.Styles.labelLeft,right:Alloy.Globals.Styles.labelRight,textAlign:Alloy.Globals.Styles.labelTextAlign,font:{fontSize:"17dp",fontFamily:"Avenir Next Condensed"},id:"nameLbl",textid:"name"}),b.__views.__alloyId23.add(b.__views.nameLbl),b.__views.name=Ti.UI.createTextField({width:Alloy.Globals.Styles.inputWidth,height:Alloy.Globals.Styles.inputHeight,top:Alloy.Globals.Styles.inputUp,bottom:"10dp",left:Alloy.Globals.Styles.inputLeft,borderColor:"#ccc",borderStyle:1,borderWidth:"1dp",textAlign:Alloy.Globals.Styles.inputTextAlign,font:{fontSize:"15dp",fontFamily:"Arial"},backgroundColor:"#fff",color:Alloy.Globals.Styles.inputColor,id:"name"}),b.__views.__alloyId23.add(b.__views.name),o?b.__views.name.addEventListener("focus",o):T["$.__views.name!focus!focus"]=!0,b.__views.companyNumberLbl=Ti.UI.createLabel({width:Alloy.Globals.Styles.labelWidth,height:Alloy.Globals.Styles.labelHeight,color:Alloy.Globals.Styles.labelColor,left:Alloy.Globals.Styles.labelLeft,right:Alloy.Globals.Styles.labelRight,textAlign:Alloy.Globals.Styles.labelTextAlign,font:{fontSize:"17dp",fontFamily:"Avenir Next Condensed"},id:"companyNumberLbl",textid:"company_number"}),b.__views.__alloyId23.add(b.__views.companyNumberLbl),b.__views.companyNumber=Ti.UI.createTextField({width:Alloy.Globals.Styles.inputWidth,height:Alloy.Globals.Styles.inputHeight,top:Alloy.Globals.Styles.inputUp,bottom:"10dp",left:Alloy.Globals.Styles.inputLeft,borderColor:"#ccc",borderStyle:1,borderWidth:"1dp",textAlign:Alloy.Globals.Styles.inputTextAlign,font:{fontSize:"15dp",fontFamily:"Arial"},backgroundColor:"#fff",color:Alloy.Globals.Styles.inputColor,id:"companyNumber"}),b.__views.__alloyId23.add(b.__views.companyNumber),o?b.__views.companyNumber.addEventListener("focus",o):T["$.__views.companyNumber!focus!focus"]=!0,b.__views.phoneLbl=Ti.UI.createLabel({width:Alloy.Globals.Styles.labelWidth,height:Alloy.Globals.Styles.labelHeight,color:Alloy.Globals.Styles.labelColor,left:Alloy.Globals.Styles.labelLeft,right:Alloy.Globals.Styles.labelRight,textAlign:Alloy.Globals.Styles.labelTextAlign,font:{fontSize:"17dp",fontFamily:"Avenir Next Condensed"},id:"phoneLbl",textid:"phone"}),b.__views.__alloyId23.add(b.__views.phoneLbl),b.__views.phone=Ti.UI.createTextField({width:Alloy.Globals.Styles.inputWidth,height:Alloy.Globals.Styles.inputHeight,top:Alloy.Globals.Styles.inputUp,bottom:"10dp",left:Alloy.Globals.Styles.inputLeft,borderColor:"#ccc",borderStyle:1,borderWidth:"1dp",textAlign:Alloy.Globals.Styles.inputTextAlign,font:{fontSize:"15dp",fontFamily:"Arial"},backgroundColor:"#fff",color:Alloy.Globals.Styles.inputColor,id:"phone",keyboardType:Titanium.UI.KEYBOARD_NUMBER_PAD}),b.__views.__alloyId23.add(b.__views.phone),o?b.__views.phone.addEventListener("focus",o):T["$.__views.phone!focus!focus"]=!0,b.__views.emailLbl=Ti.UI.createLabel({width:Alloy.Globals.Styles.labelWidth,height:Alloy.Globals.Styles.labelHeight,color:Alloy.Globals.Styles.labelColor,left:Alloy.Globals.Styles.labelLeft,right:Alloy.Globals.Styles.labelRight,textAlign:Alloy.Globals.Styles.labelTextAlign,font:{fontSize:"17dp",fontFamily:"Avenir Next Condensed"},id:"emailLbl",textid:"email"}),b.__views.__alloyId23.add(b.__views.emailLbl),b.__views.email=Ti.UI.createTextField({width:Alloy.Globals.Styles.inputWidth,height:Alloy.Globals.Styles.inputHeight,top:Alloy.Globals.Styles.inputUp,bottom:"10dp",left:Alloy.Globals.Styles.inputLeft,borderColor:"#ccc",borderStyle:1,borderWidth:"1dp",textAlign:Alloy.Globals.Styles.inputTextAlign,font:{fontSize:"15dp",fontFamily:"Arial"},backgroundColor:"#fff",color:Alloy.Globals.Styles.inputColor,id:"email",keyboardType:Titanium.UI.KEYBOARD_EMAIL}),b.__views.__alloyId23.add(b.__views.email),o?b.__views.email.addEventListener("focus",o):T["$.__views.email!focus!focus"]=!0,b.__views.addressLbl=Ti.UI.createLabel({width:Alloy.Globals.Styles.labelWidth,height:Alloy.Globals.Styles.labelHeight,color:Alloy.Globals.Styles.labelColor,left:Alloy.Globals.Styles.labelLeft,right:Alloy.Globals.Styles.labelRight,textAlign:Alloy.Globals.Styles.labelTextAlign,font:{fontSize:"17dp",fontFamily:"Avenir Next Condensed"},id:"addressLbl",textid:"address"}),b.__views.__alloyId23.add(b.__views.addressLbl),b.__views.__alloyId27=Ti.UI.createView({width:Alloy.Globals.Styles.inputWidth,height:Alloy.Globals.Styles.inputAreaHeight,top:Alloy.Globals.Styles.inputUp,bottom:"10dp",left:Alloy.Globals.Styles.inputLeft,borderColor:"#ccc",borderStyle:1,borderWidth:"1dp",textAlign:Alloy.Globals.Styles.inputTextAlign,font:{fontSize:"15dp",fontFamily:"Arial"},backgroundColor:"#fff",color:Alloy.Globals.Styles.inputColor,id:"__alloyId27"}),b.__views.__alloyId23.add(b.__views.__alloyId27),b.__views.address=Ti.UI.createTextArea(function(){var e={};return Alloy.Globals.isHe&&_.extend(e,{textAlign:"right"}),_.extend(e,{width:"160dp",height:Alloy.Globals.Styles.inputAreaHeight,top:"0dp",left:"2dp",textAlign:Alloy.Globals.Styles.inputTextAlign,font:{fontSize:"15dp",fontFamily:"Arial"},color:Alloy.Globals.Styles.inputColor,paddingLeft:"5dp",id:"address",returnKeyType:Ti.UI.RETURNKEY_SEARCH}),e}()),b.__views.__alloyId27.add(b.__views.address),c?b.__views.address.addEventListener("return",c):T["$.__views.address!return!search"]=!0,o?b.__views.address.addEventListener("focus",o):T["$.__views.address!focus!focus"]=!0,b.__views.customLocation=Ti.UI.createButton({width:"30dp",height:"30dp",bottom:"0dp",right:"0dp",font:{fontFamily:"Avenir Next Condensed",fontSize:"20dp"},color:"#fff",textAlign:"center",verticalAlign:"center",backgroundColor:Alloy.Globals.Styles.buttonBg,backgroundImage:"images/icon_location.png",backgroundRepeat:!1,id:"customLocation"}),b.__views.__alloyId27.add(b.__views.customLocation),i?b.__views.customLocation.addEventListener("touchstart",i):T["$.__views.customLocation!touchstart!buttonTouchStart"]=!0,r?b.__views.customLocation.addEventListener("touchend",r):T["$.__views.customLocation!touchend!buttonTouchEnd"]=!0,b.__views.imageLbl=Ti.UI.createLabel({width:Alloy.Globals.Styles.labelWidth,height:Alloy.Globals.Styles.labelHeight,color:Alloy.Globals.Styles.labelColor,left:Alloy.Globals.Styles.labelLeft,right:Alloy.Globals.Styles.labelRight,textAlign:Alloy.Globals.Styles.labelTextAlign,font:{fontSize:"17dp",fontFamily:"Avenir Next Condensed"},id:"imageLbl",textid:"company_logo"}),b.__views.__alloyId23.add(b.__views.imageLbl),b.__views.imageView=Ti.UI.createImageView({width:Alloy.Globals.Styles.inputWidth,bottom:"40dp",top:Alloy.Globals.Styles.inputUp,left:Alloy.Globals.Styles.inputLeft,id:"imageView",height:"0",visible:"false"}),b.__views.__alloyId23.add(b.__views.imageView),b.__views.changeImage=Ti.UI.createButton({width:"100dp",height:Alloy.Globals.Styles.inputHeight,left:Alloy.Globals.Styles.row_statusLbl_right,right:Alloy.Globals.Styles.row_statusLbl_left,style:Titanium.UI.iPhone.SystemButtonStyle.PLAIN,font:{fontFamily:"Avenir Next Condensed",fontSize:"17dp"},color:"#fff",textAlign:"center",verticalAlign:"center",backgroundColor:Alloy.Globals.Styles.buttonBg,id:"changeImage",titleid:"photo"}),b.__views.__alloyId23.add(b.__views.changeImage),g?b.__views.changeImage.addEventListener("click",g):T["$.__views.changeImage!click!addPhoto"]=!0,b.__views.deleteImage=Ti.UI.createButton({width:"30dp",height:"30dp",bottom:"10dp",top:Alloy.Globals.Styles.inputUp,style:Titanium.UI.iPhone.SystemButtonStyle.PLAIN,font:{fontFamily:"Avenir Next Condensed",fontSize:"20dp"},color:"#fff",textAlign:"center",verticalAlign:"center",backgroundColor:Alloy.Globals.Styles.buttonBg,backgroundImage:"images/icon_delete.png",backgroundRepeat:!1,left:Alloy.Globals.Styles.deleteLeft,right:Alloy.Globals.Styles.deleteRight,id:"deleteImage",visible:"false"}),b.__views.__alloyId23.add(b.__views.deleteImage),v?b.__views.deleteImage.addEventListener("click",v):T["$.__views.deleteImage!click!deleteImage"]=!0,b.__views.aboutLbl=Ti.UI.createLabel({width:Alloy.Globals.Styles.labelWidth,height:Alloy.Globals.Styles.labelHeight,color:Alloy.Globals.Styles.labelColor,left:Alloy.Globals.Styles.labelLeft,right:Alloy.Globals.Styles.labelRight,textAlign:Alloy.Globals.Styles.labelTextAlign,font:{fontSize:"17dp",fontFamily:"Avenir Next Condensed"},id:"aboutLbl",textid:"about_company"}),b.__views.__alloyId23.add(b.__views.aboutLbl),b.__views.about=Ti.UI.createTextArea(function(){var e={};return Alloy.Globals.isHe&&_.extend(e,{textAlign:"right"}),_.extend(e,{width:Alloy.Globals.Styles.inputWidth,height:Alloy.Globals.Styles.inputAreaHeight,top:Alloy.Globals.Styles.inputUp,bottom:"10dp",left:Alloy.Globals.Styles.inputLeft,borderColor:"#ccc",borderStyle:1,borderWidth:"1dp",textAlign:Alloy.Globals.Styles.inputTextAlign,font:{fontSize:"15dp",fontFamily:"Arial"},backgroundColor:"#fff",color:Alloy.Globals.Styles.inputColor,id:"about",suppressReturn:"false",returnKeyType:Ti.UI.RETURNKEY_NEXT}),e}()),b.__views.__alloyId23.add(b.__views.about),o?b.__views.about.addEventListener("focus",o):T["$.__views.about!focus!focus"]=!0,b.__views.workingHoursLbl=Ti.UI.createLabel({width:Alloy.Globals.Styles.labelWidth,height:"50",color:Alloy.Globals.Styles.labelColor,left:Alloy.Globals.Styles.labelLeft,right:Alloy.Globals.Styles.labelRight,textAlign:Alloy.Globals.Styles.labelTextAlign,font:{fontSize:"17dp",fontFamily:"Avenir Next Condensed"},id:"workingHoursLbl",textid:"working_hours"}),b.__views.__alloyId23.add(b.__views.workingHoursLbl),b.__views.workingHours=Ti.UI.createTextArea(function(){var e={};return Alloy.Globals.isHe&&_.extend(e,{textAlign:"right"}),_.extend(e,{width:Alloy.Globals.Styles.inputWidth,height:Alloy.Globals.Styles.inputAreaHeight,top:"-50",bottom:"10dp",left:Alloy.Globals.Styles.inputLeft,borderColor:"#ccc",borderStyle:1,borderWidth:"1dp",textAlign:Alloy.Globals.Styles.inputTextAlign,font:{fontSize:"15dp",fontFamily:"Arial"},backgroundColor:"#fff",color:Alloy.Globals.Styles.inputColor,id:"workingHours",suppressReturn:"false",returnKeyType:Ti.UI.RETURNKEY_NEXT}),e}()),b.__views.__alloyId23.add(b.__views.workingHours),o?b.__views.workingHours.addEventListener("focus",o):T["$.__views.workingHours!focus!focus"]=!0,b.__views.termsLbl=Ti.UI.createLabel({width:Alloy.Globals.Styles.labelWidth,height:Alloy.Globals.Styles.labelHeight,color:Alloy.Globals.Styles.labelColor,left:Alloy.Globals.Styles.labelLeft,right:Alloy.Globals.Styles.labelRight,textAlign:Alloy.Globals.Styles.labelTextAlign,font:{fontSize:"17dp",fontFamily:"Avenir Next Condensed"},id:"termsLbl",textid:"terms_company"}),b.__views.__alloyId23.add(b.__views.termsLbl),b.__views.terms=Ti.UI.createTextArea(function(){var e={};return Alloy.Globals.isHe&&_.extend(e,{textAlign:"right"}),_.extend(e,{width:Alloy.Globals.Styles.inputWidth,height:Alloy.Globals.Styles.inputAreaHeight,top:Alloy.Globals.Styles.inputUp,bottom:"10dp",left:Alloy.Globals.Styles.inputLeft,borderColor:"#ccc",borderStyle:1,borderWidth:"1dp",textAlign:Alloy.Globals.Styles.inputTextAlign,font:{fontSize:"15dp",fontFamily:"Arial"},backgroundColor:"#fff",color:Alloy.Globals.Styles.inputColor,id:"terms",suppressReturn:"false",returnKeyType:Ti.UI.RETURNKEY_NEXT}),e}()),b.__views.__alloyId23.add(b.__views.terms),o?b.__views.terms.addEventListener("focus",o):T["$.__views.terms!focus!focus"]=!0,b.__views.update=Ti.UI.createButton({width:"120dp",height:"40dp",bottom:"20dp",style:Titanium.UI.iPhone.SystemButtonStyle.PLAIN,font:{fontFamily:"Avenir Next Condensed",fontSize:"20dp"},color:"#fff",textAlign:"center",verticalAlign:"center",backgroundColor:Alloy.Globals.Styles.buttonBg,id:"update",titleid:"add"}),b.__views.__alloyId23.add(b.__views.update),i?b.__views.update.addEventListener("touchstart",i):T["$.__views.update!touchstart!buttonTouchStart"]=!0,r?b.__views.update.addEventListener("touchend",r):T["$.__views.update!touchend!buttonTouchEnd"]=!0,b.__views.pickerWrap=Ti.UI.createView({layout:"vertical",width:Ti.UI.FILL,height:Ti.UI.SIZE,bottom:"0",id:"pickerWrap"}),b.__views.window.add(b.__views.pickerWrap),A.destroy=function(){},_.extend(b,b.__views);var I=Alloy.Globals.errors,S=Alloy.Globals.core;address=!1,lat=!1,lng=!1,subCategories=[],image=!1,imageUpdated=!1,sectionName="",progress=Alloy.Globals.progress,callback=arguments[0]&&arguments[0].callback||!1,newSupplier=!0;var C=Alloy.Globals.indicator;if(b.address.setHintText(L("enter_address")),Alloy.Globals.profile)if(Alloy.Globals.profile.supplier){newSupplier=!1,b.window.title=L("edit_company"),b.update.title=L("update"),subCategories=JSON.parse(Alloy.Globals.profile.supplier.subCategories),b.name.value=Alloy.Globals.profile.supplier.name,b.phone.value=Alloy.Globals.profile.supplier.phone,b.email.value=Alloy.Globals.profile.supplier.email,b.address.value=Alloy.Globals.profile.supplier.address,b.companyNumber.value=Alloy.Globals.profile.supplier.number,lat=parseFloat(Alloy.Globals.profile.supplier.lat),lng=parseFloat(Alloy.Globals.profile.supplier.lng),b.about.value=Alloy.Globals.profile.supplier.about,b.workingHours.value=Alloy.Globals.profile.supplier.workingHours,b.terms.value=Alloy.Globals.profile.supplier.terms,Alloy.Globals.profile.supplier.logo&&(image=Alloy.Globals.profile.supplier.logoUrl+Alloy.Globals.profile.supplier.logoId+Alloy.Globals.imageSizes.supplier.edit(),b.imageView.image=image,b.imageView.visible=!0,b.imageView.height=Ti.UI.SIZE,b.imageView.bottom="10dp",b.deleteImage.visible=!0),S.selectedCategoriesInEdit={};for(var k=0;k<subCategories.length;++k){var E=subCategories[k];S.subCategories.select({categoryId:E.CategoryId,id:E.Id},S.selectedCategoriesInEdit)}sectionName="",Alloy.Globals.core.currentSection=sectionName,n()}else b.phone.value=Alloy.Globals.profile.phone,b.email.value=Alloy.Globals.profile.email;var x,G=!1,U={options:["Make Photo","Choose Photo","Cancel"],cancel:2},M=Titanium.UI.createOptionDialog(U);M.addEventListener("click",function(e){0==e.index&&m(),1==e.index&&y()}),T["$.__views.window!click!blur"]&&b.__views.window.addEventListener("click",e),T["$.__views.window!close!close"]&&b.__views.window.addEventListener("close",f),T["$.__views.categories!click!categories"]&&b.__views.categories.addEventListener("click",w),T["$.__views.name!focus!focus"]&&b.__views.name.addEventListener("focus",o),T["$.__views.companyNumber!focus!focus"]&&b.__views.companyNumber.addEventListener("focus",o),T["$.__views.phone!focus!focus"]&&b.__views.phone.addEventListener("focus",o),T["$.__views.email!focus!focus"]&&b.__views.email.addEventListener("focus",o),T["$.__views.address!return!search"]&&b.__views.address.addEventListener("return",c),T["$.__views.address!focus!focus"]&&b.__views.address.addEventListener("focus",o),T["$.__views.customLocation!touchstart!buttonTouchStart"]&&b.__views.customLocation.addEventListener("touchstart",i),T["$.__views.customLocation!touchend!buttonTouchEnd"]&&b.__views.customLocation.addEventListener("touchend",r),T["$.__views.changeImage!click!addPhoto"]&&b.__views.changeImage.addEventListener("click",g),T["$.__views.deleteImage!click!deleteImage"]&&b.__views.deleteImage.addEventListener("click",v),T["$.__views.about!focus!focus"]&&b.__views.about.addEventListener("focus",o),T["$.__views.workingHours!focus!focus"]&&b.__views.workingHours.addEventListener("focus",o),T["$.__views.terms!focus!focus"]&&b.__views.terms.addEventListener("focus",o),T["$.__views.update!touchstart!buttonTouchStart"]&&b.__views.update.addEventListener("touchstart",i),T["$.__views.update!touchend!buttonTouchEnd"]&&b.__views.update.addEventListener("touchend",r),_.extend(b,A)}var Alloy=require("alloy"),Backbone=Alloy.Backbone,_=Alloy._;module.exports=Controller;