function __processArg(e,t){var l=null;return e&&(l=e[t]||null,delete e[t]),l}function Controller(){function e(e){t(e)}function t(e){e.source.id!==d.subject.id&&d.pickerWrap.removeAllChildren(),e.source.id!==d.message.id&&d.message.blur(),e.source.id!==d.contactName.id&&d.contactName.blur(),e.source.id!==d.contactPhone.id&&d.contactPhone.blur(),e.source.id!==d.contactMail.id&&d.contactMail.blur()}function l(){if(Alloy.Globals.profile){var e=Alloy.Globals.profile,t="";e.firstName&&(t=e.firstName),e.lastName&&(t=t.length>0?t+" "+e.lastName:e.lastName),d.contactName.value=t,d.contactMail.value=e.email,d.contactPhone.value=e.phone}}function o(e){t(e)}function i(e){e.source.backgroundColor=Alloy.Globals.Styles.buttonBgOnTap}function s(e){h.openIndicator(),e.source.backgroundColor=Alloy.Globals.Styles.buttonBg,e.source.id==d.send.id&&a()}function a(){var e=Alloy.createModel("contactUs",{subject:d.subject.value,message:d.message.value,name:d.contactName.value,email:d.contactMail.value,phone:d.contactPhone.value});e.localValidate(r)&&(e.attributes.message="Name: "+e.attributes.name+"\nPhone: "+e.attributes.phone+"\nEmail: "+e.attributes.email+"\nMessage: "+e.attributes.message+"\n"+L("version")+": "+Ti.App.version,h.openIndicator(),e.save({},{success:function(){Alloy.Globals.core.showErrorDialog(L("success_contact_us")),d.message.value="",h.closeIndicator()},error:function(){h.closeIndicator()}}))}function r(e){switch(e){case errors.NO_MESSAGE:d.message.focus();break;case errors.NO_NAME:d.contactName.focus();break;case errors.NO_PHONE:d.contactPhone.focus();break;case errors.NO_EMAIL:d.contactMail.focus()}h.closeIndicator(),Alloy.Globals.core.showError(e)}function n(){var e=Alloy.createController("picker/genericPicker",{items:y,rowIndex:g,callback:function(e,t,l){d.subject.value=e.title?e.title:e,l>=0&&(g=l),t&&d.pickerWrap.removeAllChildren()}}).getView();d.pickerWrap.removeAllChildren(),d.pickerWrap.add(e)}require("alloy/controllers/BaseController").apply(this,Array.prototype.slice.call(arguments)),this.__controllerPath="contactUs/index",arguments[0]&&(__processArg(arguments[0],"__parentSymbol"),__processArg(arguments[0],"$model"),__processArg(arguments[0],"__itemTemplate"));var d=this,c={},u={};d.__views.index=Ti.UI.createWindow({backgroundImage:Alloy.Globals.Styles.backgroundImage,layout:"absolute",fullscreen:"true",id:"index"}),d.__views.index&&d.addTopLevelView(d.__views.index),e?d.__views.index.addEventListener("click",e):u["$.__views.index!click!blur"]=!0,d.__views.__alloyId170=Ti.UI.createScrollView({layout:"vertical",left:"20dp",right:"20dp",top:"0",id:"__alloyId170"}),d.__views.index.add(d.__views.__alloyId170),d.__views.__alloyId171=Ti.UI.createLabel({height:"80dp",width:Ti.UI.FILL,textAlign:"center",color:Alloy.Globals.Styles.titleColor,font:{fontSize:"25dp",fontFamily:"OleoScriptSwashCaps-Regular"},textid:"win_contact_us",id:"__alloyId171"}),d.__views.__alloyId170.add(d.__views.__alloyId171),d.__views.contact_nameLbl=Ti.UI.createLabel({width:Alloy.Globals.Styles.labelWidth,height:Alloy.Globals.Styles.labelHeight,color:Alloy.Globals.Styles.labelColor,left:Alloy.Globals.Styles.labelLeft,right:Alloy.Globals.Styles.labelRight,textAlign:Alloy.Globals.Styles.labelTextAlign,font:{fontSize:"17dp",fontFamily:"Avenir Next Condensed"},id:"contact_nameLbl",textid:"name"}),d.__views.__alloyId170.add(d.__views.contact_nameLbl),d.__views.contactName=Ti.UI.createTextField({width:Alloy.Globals.Styles.inputWidth,height:Alloy.Globals.Styles.inputHeight,top:Alloy.Globals.Styles.inputUp,bottom:"10dp",left:Alloy.Globals.Styles.inputLeft,borderColor:"#ccc",borderStyle:1,borderWidth:"1dp",textAlign:Alloy.Globals.Styles.inputTextAlign,font:{fontSize:"15dp",fontFamily:"Arial"},backgroundColor:"#fff",color:Alloy.Globals.Styles.inputColor,id:"contactName",enabled:"true"}),d.__views.__alloyId170.add(d.__views.contactName),d.__views.contact_phoneLbl=Ti.UI.createLabel({width:Alloy.Globals.Styles.labelWidth,height:Alloy.Globals.Styles.labelHeight,color:Alloy.Globals.Styles.labelColor,left:Alloy.Globals.Styles.labelLeft,right:Alloy.Globals.Styles.labelRight,textAlign:Alloy.Globals.Styles.labelTextAlign,font:{fontSize:"17dp",fontFamily:"Avenir Next Condensed"},id:"contact_phoneLbl",textid:"phone"}),d.__views.__alloyId170.add(d.__views.contact_phoneLbl),d.__views.contactPhone=Ti.UI.createTextField({width:Alloy.Globals.Styles.inputWidth,height:Alloy.Globals.Styles.inputHeight,top:Alloy.Globals.Styles.inputUp,bottom:"10dp",left:Alloy.Globals.Styles.inputLeft,borderColor:"#ccc",borderStyle:1,borderWidth:"1dp",textAlign:Alloy.Globals.Styles.inputTextAlign,font:{fontSize:"15dp",fontFamily:"Arial"},backgroundColor:"#fff",color:Alloy.Globals.Styles.inputColor,id:"contactPhone",enabled:"true",keyboardType:Ti.UI.KEYBOARD_NUMBER_PAD}),d.__views.__alloyId170.add(d.__views.contactPhone),d.__views.contact_mailLbl=Ti.UI.createLabel({width:Alloy.Globals.Styles.labelWidth,height:Alloy.Globals.Styles.labelHeight,color:Alloy.Globals.Styles.labelColor,left:Alloy.Globals.Styles.labelLeft,right:Alloy.Globals.Styles.labelRight,textAlign:Alloy.Globals.Styles.labelTextAlign,font:{fontSize:"17dp",fontFamily:"Avenir Next Condensed"},id:"contact_mailLbl",textid:"email"}),d.__views.__alloyId170.add(d.__views.contact_mailLbl),d.__views.contactMail=Ti.UI.createTextField({width:Alloy.Globals.Styles.inputWidth,height:Alloy.Globals.Styles.inputHeight,top:Alloy.Globals.Styles.inputUp,bottom:"10dp",left:Alloy.Globals.Styles.inputLeft,borderColor:"#ccc",borderStyle:1,borderWidth:"1dp",textAlign:Alloy.Globals.Styles.inputTextAlign,font:{fontSize:"15dp",fontFamily:"Arial"},backgroundColor:"#fff",color:Alloy.Globals.Styles.inputColor,id:"contactMail",enabled:"true",keyboardType:Ti.UI.KEYBOARD_EMAIL}),d.__views.__alloyId170.add(d.__views.contactMail),d.__views.subjectLbl=Ti.UI.createLabel({width:Alloy.Globals.Styles.labelWidth,height:Alloy.Globals.Styles.labelHeight,color:Alloy.Globals.Styles.labelColor,left:Alloy.Globals.Styles.labelLeft,right:Alloy.Globals.Styles.labelRight,textAlign:Alloy.Globals.Styles.labelTextAlign,font:{fontSize:"17dp",fontFamily:"Avenir Next Condensed"},id:"subjectLbl",textid:"subject"}),d.__views.__alloyId170.add(d.__views.subjectLbl),d.__views.subject=Ti.UI.createTextField({width:Alloy.Globals.Styles.inputWidth,height:Alloy.Globals.Styles.inputHeight,top:Alloy.Globals.Styles.inputUp,bottom:"10dp",left:Alloy.Globals.Styles.inputLeft,borderColor:"#ccc",borderStyle:1,borderWidth:"1dp",textAlign:Alloy.Globals.Styles.inputTextAlign,font:{fontSize:"15dp",fontFamily:"Arial"},backgroundColor:"#fff",color:Alloy.Globals.Styles.inputColor,id:"subject",enabled:"false"}),d.__views.__alloyId170.add(d.__views.subject),n?d.__views.subject.addEventListener("click",n):u["$.__views.subject!click!clickSubject"]=!0,d.__views.messageLbl=Ti.UI.createLabel({width:Alloy.Globals.Styles.labelWidth,height:Alloy.Globals.Styles.labelHeight,color:Alloy.Globals.Styles.labelColor,left:Alloy.Globals.Styles.labelLeft,right:Alloy.Globals.Styles.labelRight,textAlign:Alloy.Globals.Styles.labelTextAlign,font:{fontSize:"17dp",fontFamily:"Avenir Next Condensed"},id:"messageLbl",textid:"message"}),d.__views.__alloyId170.add(d.__views.messageLbl),d.__views.message=Ti.UI.createTextArea(function(){var e={};return Alloy.Globals.isHe&&_.extend(e,{textAlign:"right"}),_.extend(e,{width:Alloy.Globals.Styles.inputWidth,height:Alloy.Globals.Styles.inputAreaHeight,top:Alloy.Globals.Styles.inputUp,bottom:"10dp",left:Alloy.Globals.Styles.inputLeft,borderColor:"#ccc",borderStyle:1,borderWidth:"1dp",textAlign:Alloy.Globals.Styles.inputTextAlign,font:{fontSize:"15dp",fontFamily:"Arial"},backgroundColor:"#fff",color:Alloy.Globals.Styles.inputColor,id:"message",suppressReturn:"false",returnKeyType:Ti.UI.RETURNKEY_NEXT}),e}()),d.__views.__alloyId170.add(d.__views.message),o?d.__views.message.addEventListener("focus",o):u["$.__views.message!focus!focus"]=!0,d.__views.send=Ti.UI.createButton({width:"120dp",height:"40dp",bottom:"20dp",style:Titanium.UI.iPhone.SystemButtonStyle.PLAIN,font:{fontFamily:"Avenir Next Condensed",fontSize:"20dp"},color:"#fff",textAlign:"center",verticalAlign:"center",backgroundColor:Alloy.Globals.Styles.buttonBg,id:"send",titleid:"send"}),d.__views.__alloyId170.add(d.__views.send),i?d.__views.send.addEventListener("touchstart",i):u["$.__views.send!touchstart!buttonTouchStart"]=!0,s?d.__views.send.addEventListener("touchend",s):u["$.__views.send!touchend!buttonTouchEnd"]=!0,d.__views.pickerWrap=Ti.UI.createView({layout:"vertical",width:Ti.UI.FILL,height:Ti.UI.SIZE,bottom:"0",id:"pickerWrap"}),d.__views.index.add(d.__views.pickerWrap),c.destroy=function(){},_.extend(d,d.__views),Alloy.Globals.chat.openChatId=!1;var y=[{title:L("complaint"),data:{id:1}},{title:L("bug_report"),data:{id:2}},{title:L("investment"),data:{id:3}},{title:L("features_suggestion"),data:{id:4}},{title:L("improvement_suggestion"),data:{id:5}},{title:L("affiliate_request"),data:{id:6}},{title:L("blocked_account"),data:{id:7}},{title:L("other"),data:{id:8}}];d.subject.value=y[0].title;var p,b=!1,h=Alloy.Globals.indicator;Ti.App.addEventListener("open:contactus",l),Ti.App.addEventListener("app:userblocked",function(e){p=e.email,g=6,d.subject.value=y[6].title,b=!0});var g=0;u["$.__views.index!click!blur"]&&d.__views.index.addEventListener("click",e),u["$.__views.subject!click!clickSubject"]&&d.__views.subject.addEventListener("click",n),u["$.__views.message!focus!focus"]&&d.__views.message.addEventListener("focus",o),u["$.__views.send!touchstart!buttonTouchStart"]&&d.__views.send.addEventListener("touchstart",i),u["$.__views.send!touchend!buttonTouchEnd"]&&d.__views.send.addEventListener("touchend",s),_.extend(d,c)}var Alloy=require("alloy"),Backbone=Alloy.Backbone,_=Alloy._;module.exports=Controller;