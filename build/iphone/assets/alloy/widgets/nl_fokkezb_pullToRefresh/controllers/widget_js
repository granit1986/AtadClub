function WPATH(t){var l=t.lastIndexOf("/"),e=-1===l?"nl.fokkezb.pullToRefresh/"+t:t.substring(0,l)+"/nl.fokkezb.pullToRefresh/"+t.substring(l+1);return e}function __processArg(t,l){var e=null;return t&&(e=t[l]||null,delete t[l]),e}function Controller(){function t(t){return!h||A?!1:(A=!0,f=!1,d.view.ptrText.text=t||g.msgUpdating,d.view.ptrArrow.opacity=0,d.view.ptrIndicator.show(),d.view.prtCenter.show(),y.setContentInsets({top:g.top+b},{animated:!0}),!0)}function l(){return h&&A?(d.view.ptrIndicator.hide(),d.view.ptrArrow.transform=Ti.UI.create2DMatrix(),d.view.ptrArrow.opacity=1,d.view.ptrText.text=g.msgPull,y.setContentInsets({top:g.top},{animated:!0,duration:250}),setTimeout(function(){d.view.prtCenter.hide()},250),f=!0,A=!1,S=!1,!0):!1}function e(){return!h||S?!1:(S=!0,t(),d.trigger("release",{hide:l}),!0)}function o(t){if(!A)if(m=t.contentOffset.y,m>=0-g.top?f||(d.view.prtCenter.hide(),f=!0):f&&(d.view.prtCenter.show(),f=!1),u&&!S&&m>0-g.top-b){u=!1;var l=Ti.UI.create2DMatrix();d.view.ptrArrow.animate({transform:l,duration:180}),d.view.ptrText.text=g.msgPull}else if(!u&&!S&&m<=0-g.top-b){u=!0;var e=Ti.UI.create2DMatrix().rotate(180);d.view.ptrArrow.animate({transform:e,duration:180}),d.view.ptrText.text=g.msgRelease}}function i(){!A&&u&&!S&&m<=0-g.top-b&&(u=!1,e())}function s(t){_.extend(g,t)}function r(){return h?!1:(y.headerPullView=d.view.ptr,n(),!0)}function n(){y.addEventListener("scroll",o),b=d.view.ptr.height,h=!0,u=!1,A=!1,S=!1,m=0,y.addEventListener("dragEnd",i),d.view.ptrText.text=g.msgPull}function a(){return h?(y.removeEventListener("scroll",o),y.removeEventListener("dragEnd",i),y.headerPullView=null,h=!1,!0):!1}if(new(require("alloy/widget"))("nl.fokkezb.pullToRefresh"),this.__widgetId="nl.fokkezb.pullToRefresh",require("alloy/controllers/BaseController").apply(this,Array.prototype.slice.call(arguments)),this.__controllerPath="widget",arguments[0]){var y=__processArg(arguments[0],"__parentSymbol");__processArg(arguments[0],"$model"),__processArg(arguments[0],"__itemTemplate")}var d=this,p={};d.__views.view=Alloy.createWidget("nl.fokkezb.pullToRefresh","view",{id:"view",__parentSymbol:y}),d.__views.view.getViewEx({recurse:!0})&&d.addProxyProperty("headerPullView",d.__views.view.getViewEx({recurse:!0})),p.destroy=function(){},_.extend(d,d.__views);var c=arguments[0]||{},g={msgPull:L("pull_to_refresh","Pull to refresh..."),msgRelease:L("release_to_refresh","Release to refresh..."),msgUpdating:L("updating","Updating..."),top:0},b=50,h=!1,f=!0,u=!1,A=!1,S=!1,m=0;delete c.__parentSymbol,delete c.__itemTemplate,delete c.$model,s(c),n(),p.setOptions=s,p.show=t,p.hide=l,p.refresh=e,p.dettach=a,p.attach=r,_.extend(d,p)}var Alloy=require("alloy"),Backbone=Alloy.Backbone,_=Alloy._;module.exports=Controller;